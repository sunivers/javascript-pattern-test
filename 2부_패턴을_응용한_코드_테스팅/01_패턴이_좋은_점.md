# 사례 연구
패턴의 범위는 사소한 언어의 관용 구문부터 시스템 구조에 이르기 까지 매우 넓다.  
예로부터 사람들의 수많은 경험이 쌓여 점점 더 나은 패턴이 발전해왔고 그러한 패턴을 사용함으로써 깔끔한 코드를 작성할 수 있다.

아래는 아주 먼 옛날, goto 문을 이용해 배열 반복을 표현하던 방식이다. (자바스크립트에 goto 문이 있다고 가정.)
```
idx = 0;
the_test:
if (idx >= myArray.length) {
  goto the_end;
}
doSomething(myArray[idx]);
idx = idx+1;
goto the_test;
the_end:
```

goto 문은 코드를 읽기 힘들게 만들기 때문에 더이상 사용되지 않고 이를 개선한 패턴인 for 루프문이 등장했다.

```
for (idx=0; idx<myArray.length; idx++) {
  doSomething(myArray[idx]);
}
```

for 루프문은 코드를 짧고 분명하게 해주어서 한 눈에 알아보기 쉽다. 그러나 여기서 멈추지 않고 패턴은 지속적으로 발전한다. 배열 원소를 순회하는 루프는 매우 자주 쓰이는 코드이기 때문에 ECMAScript 5 언어 설계자들은 더욱 간결한 구문을 고안해냈다.

```
myArray.forEach(doSomething);
```

초기화, 체크, 증감 관련 코드를 모두 제거하고 너무나 간단하고 명확한 한 줄로 배열 반복문이 완성되었다.  
깔끔할뿐더러 조건문이나 원소 참조 코드도 없어서 에러 발생 확률이 없는 믿음직한 코드가 됐다.  

물론 forEach 문을 잘 이해하고 구사할 줄 아는 개발자에 한해서 의미가 있다. 결국 **폭넓은 어휘력**을 소유한 개발자가 더 우아한 코드를 작성할 수 있다는 뜻이다.

# 어휘력을 늘려 더 멋진 코드 만들기
for문과 forEach를 비교해보면 for 문에서는 doSomething을 호출하는 일 외에 할당, 프로퍼티 참조, 배열 원소 참조, 조건 분기 등의 잡다한 코드가 끼어든다. 불필요한 코드 더미에서 멋진 코드가 나올 수 없다. forEach는 언어에 패턴을 달여넣은 하나의 예다.

이는 서드파티 라이브러리에서 볼 수 있는 더 큰 규모의 패턴도 마찬가지다.
- `프라미스 패턴`은 비동기 액션을 초기화하고 성공/실패 케이스를 각각 처리할 콜백을 던져준다. 비동기 프로그래밍을 패턴화 한 것으로 이해하고 나면 훨씬 편하고 쉽게 우아한 코드를 작성할 수 있다.
- `장식자 패턴`은 정규 교육을 받지 못한 개발자는 생각하기 힘들겠지만, 단일 책임 원칙을 준수하면서 믿음성이 강화된 코드를 효과적으로 작성할 수 있다. (12장에 나올 예정이라 아직 나도 잘 모르겠다.)

따지고 보면 처음 프로그래밍을 배울 땐 for문을 깨우치는 것도 굉장히 의미 있는 일이다. 그런 의미에서 이 책에 나오는 고수준 패턴들을 일상 어휘처럼 익히면 그만큼 앞으로 짜는 코드의 품질이 좋아질 것이다.

# 잘 다듬고 테스트한 블록을 쌓아 믿음직한 코드 작성하기
에릭 감마, 리터드 헬름, 랠프 존슨, 존 블라시디스가 지은 명저 `GoF의 디자인 패턴: 재사용성을 지닌 객체 지향 소프트웨어의 핵심요소` 라는 책은 확실히 유용하다고 검증된 23개 패턴을 이용하여 올바를 방향으로 소프트웨어를 제작할 수 있도록 해준다. 이러한 정통 패턴들은 소프트웨어가 사라지지 않는 한 계속 쓰일 것이다.

그러나 이러한 패턴은 전체적인 관점에서 보면 후반부에 해당되고 전반부에는 항상 **테스트**가 자리한다. 지극히 간단한 패턴이라도 테스트가 우선되어야 한다. 그러나 대부분 개발자들은 패턴 자체를 이용하는 것 보다 패턴을 이용한 코드를 빈틈없이 테스트하는 방법을 몰라서 애를 먹는다. 이 책의 나머지 부분에서 그에 대해 배울 것이다.

# 정리하기
소프트웨어 개발 세계에는 언어 문법과 관용 구문 같은 **소규모 패턴**과 시스템 구축 전반에 필요한 **대규모 패턴**이 있다.  
노련한 소프트웨어 개발자는 자신만의 폭넓은 **패턴 어휘력**을 보유하고 있어서 테스트를 기반으로 한 검증된 빌딩 블록을 쌓아 올려 믿음성 있는 시스템을 구축한다.